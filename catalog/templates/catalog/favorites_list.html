{% extends 'catalog/base.html' %}
{% load static %}

{% block title %}Избранное{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/catalog.css' %}">
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block header_title %}❤️ Избранное{% endblock %}

{% block content %}
{% if favorites %}
    <h2 style="font-size: 2rem; margin-bottom: 2rem; color: #333;">Ваши избранные товары ({{ favorites.count }})</h2>
    
    <div class="products-grid">
        {% for favorite in favorites %}
            <div class="product-card" style="position: relative;">
                <a href="{% url 'catalog:product_detail' favorite.product.article %}">
                    {% if favorite.product.images.all.0 %}
                        <img src="{{ favorite.product.images.all.0.image.url }}" alt="{{ favorite.product.name }}" class="product-image">
                    {% else %}
                        <div class="product-image"></div>
                    {% endif %}
                </a>
                
                <form action="{% url 'catalog:toggle_favorite' favorite.product.article %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="remove-favorite" title="Удалить из избранного">✖</button>
                </form>
                
                <div class="product-info">
                    <div class="product-category">{{ favorite.product.category.name }}</div>
                    <h3 class="product-name">{{ favorite.product.name }}</h3>
                    <div class="product-article">Арт: {{ favorite.product.article }}</div>
                    <div class="product-material">{{ favorite.product.material.name }} • {{ favorite.product.weight }} г</div>
                    <div class="added-date">Добавлено: {{ favorite.added_at|date:"d.m.Y" }}</div>
                    
                    <div class="product-footer">
                        <div class="product-price">{{ favorite.product.price }} $</div>
                        <a href="{% url 'catalog:product_detail' favorite.product.article %}" class="btn btn-small">Смотреть</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <h2>У вас пока нет избранных товаров</h2>
        <p>Добавляйте товары в избранное, чтобы не потерять их</p>
        <a href="{% url 'catalog:home' %}" class="btn">Перейти к каталогу</a>
    </div>
{% endif %}
{% endblock %}