{% extends 'catalog/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Редактирование профиля" %}{% endblock %}

{% block content %}
<div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm max-w-4xl mx-auto">
    <div class="bg-gradient-to-r from-primary-600 to-purple-600 text-white px-6 py-4 rounded-t-lg">
        <h2 class="text-xl font-semibold">
            <i class="bi bi-gear mr-2"></i>
            {% trans "Редактировать профиль завода" %}
        </h2>
    </div>
    <div class="p-8">
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            {% for field in form %}
            <div>
                <label for="{{ field.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ field.label }}
                </label>
                {% if field.field.widget.input_type == 'file' %}
                <input type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="block w-full text-sm text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700 focus:outline-none" {% if field.field.required %}required{% endif %}>
                {% elif field.field.widget.input_type == 'textarea' %}
                <textarea name="{{ field.name }}" id="{{ field.id_for_label }}" rows="4" class="bg-gray-50 dark:bg-gray-700 border {% if field.errors %}border-red-500{% else %}border-gray-300 dark:border-gray-600{% endif %} text-gray-900 dark:text-white text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" {% if field.field.required %}required{% endif %}>{{ field.value|default:'' }}</textarea>
                {% else %}
                <input type="text" name="{{ field.name }}" id="{{ field.id_for_label }}" value="{{ field.value|default:'' }}" class="bg-gray-50 dark:bg-gray-700 border {% if field.errors %}border-red-500{% else %}border-gray-300 dark:border-gray-600{% endif %} text-gray-900 dark:text-white text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" {% if field.field.required %}required{% endif %}>
                {% endif %}

                {% if field.help_text %}
                <p class="mt-2 text-sm text-gray-500 dark:text-white">{{ field.help_text }}</p>
                {% endif %}

                {% if field.errors %}
                {% for error in field.errors %}
                <div class="flex items-center p-4 mt-2 text-sm text-red-800 dark:text-red-300 bg-red-50 dark:bg-red-900/30 rounded-lg border border-red-300 dark:border-red-800" role="alert">
                    <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                    </svg>
                    <span>{{ error }}</span>
                </div>
                {% endfor %}
                {% endif %}
            </div>
            {% endfor %}

            <div class="flex gap-3">
                <button type="submit" class="text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center">
                    <i class="bi bi-save mr-2"></i>
                    {% trans "Сохранить" %}
                </button>
                <a href="{% url 'catalog:factory_dashboard' %}" class="text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center">
                    <i class="bi bi-arrow-left mr-2"></i>
                    {% trans "Назад в кабинет" %}
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
