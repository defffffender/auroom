{% extends 'catalog/base.html' %}
{% load static %}

{% block title %}{{ factory.name }} - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'css/catalog.css' %}">
{% endblock %}

{% block content %}
<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≤–æ–¥–µ -->
<div class="factory-detail-header">
    {% if factory.logo %}
        <img src="{{ factory.logo.url }}" alt="{{ factory.name }}" class="factory-logo-large">
    {% else %}
        <div class="factory-logo-large"></div>
    {% endif %}
    
    <div class="factory-details">
        <h1>{{ factory.name }}</h1>
        
        {% if factory.is_verified %}
            <span class="verified-badge">‚úì –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å</span>
        {% endif %}
        
        {% if factory.description %}
            <p class="factory-description">{{ factory.description }}</p>
        {% endif %}
        
        <div class="factory-contacts">
            <div class="contact-item">
                üìç {{ factory.address }}
            </div>
            <div class="contact-item">
                üìû {{ factory.phone }}
            </div>
            <div class="contact-item">
                ‚úâÔ∏è {{ factory.email }}
            </div>
        </div>
    </div>
</div>

<!-- –¢–æ–≤–∞—Ä—ã –∑–∞–≤–æ–¥–∞ -->
<div class="products-section">
    <h2>–¢–æ–≤–∞—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è ({{ products.count }})</h2>
    
    {% if products %}
        <div class="products-grid">
            {% for product in products %}
                <a href="{% url 'catalog:product_detail' product.article %}" class="product-card">
                    {% if product.images.all.0 %}
                        <img src="{{ product.images.all.0.image.url }}" alt="{{ product.name }}" class="product-image">
                    {% else %}
                        <div class="product-image"></div>
                    {% endif %}
                    
                    <div class="product-info">
                        <div class="product-category">{{ product.category.name }}</div>
                        <h3 class="product-name">{{ product.name }}</h3>
                        <div class="product-article">–ê—Ä—Ç: {{ product.article }}</div>
                        <div class="product-material">{{ product.material.name }} ‚Ä¢ {{ product.weight }} –≥</div>
                        
                        {% if product.in_stock %}
                            <span class="stock-badge in-stock">‚úì –í –Ω–∞–ª–∏—á–∏–∏</span>
                        {% else %}
                            <span class="stock-badge out-stock">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>
                        {% endif %}
                        
                        <div class="product-footer">
                            <div class="product-price">{{ product.price }} $</div>
                        </div>
                    </div>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <h3>–£ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</h3>
            <p>–ó–∞—Ö–æ–¥–∏—Ç–µ –ø–æ–∑–∂–µ, —Ç–æ–≤–∞—Ä—ã —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è</p>
        </div>
    {% endif %}
</div>
{% endblock %}